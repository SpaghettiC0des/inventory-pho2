!function(t,i,e){"use strict";var a=t.INVENTO.XHR,n=t.INVENTO.VM.dataObjects,s={name:e.observable(),updateID:e.observable()},o=s;$("#districtsDT").on("click",".district-edit",function(){var t=$(this).data("id");o.updateID(t);var i=e.utils.arrayFilter(n.allDistricts(),function(i){return i.id==t});o.name(i[0].name),$("#editDistrictModal").modal("show")}),$("#districtsDT").on("click",".district-delete",function(){var t=$(this).data("id");swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",closeOnConfirm:!1,closeOnCancel:!0},function(i){i&&a.post("districts/delete/"+t).done(function(i){i&&($("#districtTR_"+t).addClass("animated zoomOutDown").hide("slow"),swal("District deleted!","","success"))}).fail(function(){swal("Whoops! Something went wrong.","","error")})})}),o.handleSubmit=function(){a.post("districts/save",{name:o.name()}).done(function(t){if(t){var i=e.utils.parseJson(t);n.allDistricts.push(i[0]),o.name(void 0),$("#addDistrictModal").modal("hide"),swal("New District added!","","success")}}).fail(function(){swal("Whoops! Something went wrong.","","error")})},o.handleUpdate=function(){var i=o.updateID(),e=t.INVENTO.DT.districtsDT,n=$("#districtTR_"+i),s=e.row(n).data();a.post("districts/update/"+i,{name:o.name()}).done(function(a){if(a){$("#editDistrictModal").modal("hide");var a=JSON.parse(a)[0],o=t.INVENTO.VM.dataObjects.allDistricts;o.remove(function(t){return t.id==i}),o.push(a),s[0]="<strong>"+a.name+"</strong>",s[2]=moment(a.updated_at).format("MMMM DD, YYYY hh:mm A"),e.row(n).data(s).draw(),swal("District Updated to "+a.name+"!","","success")}}).fail(function(){swal("Whoops! Something went wrong.","","error")})},t.INVENTO.VM.districtVM=o}(window,jQuery,ko);!function(e,r,a){"use strict";var s=e.INVENTO.XHR,l={allSuppliers:a.observableArray([]),allCategories:a.observableArray([]),allItems:a.observableArray([]),allDistricts:a.observableArray([]),allOffices:a.observableArray([]),allReferenceNumbers:a.observableArray([]),settings:a.observableArray([]),allTransactions:a.observableArray([])},t=l;s.getJ("ajax_source/admin").done(function(e){t.allSuppliers(e.suppliers),t.allCategories(e.categories),t.allItems(e.items),t.allDistricts(e.districts),t.allOffices(e.offices),t.allReferenceNumbers(e.reference_numbers),t.settings(e.settings),t.allTransactions(e.transactions)}).fail(function(){}),e.INVENTO.VM.dataObjects=l}(window,jQuery,ko);!function(e,t,i){"use strict";var o=e.INVENTO.XHR,a={image_file_name:i.observable(),category_id:i.observable(),code:i.observable(),name:i.observable(),quantity:i.observable(1),unit:i.observable(),cost:i.observable(),price:i.observable(),description:i.observable(),updateID:i.observable()},n=a;n.handleSubmit=function(){var e=i.toJS(n);delete e.edit,delete e.handleSubmit,delete e.handleUpdate,delete e.updateID,o.post("items/save",e).done(function(e){$("#addItemModal").modal("hide"),swal("New Item added!","","success")}).fail(function(){swal("Whoops! Something went wrong.","","error")})},$("#itemsDT").on("click",".item-edit",function(){swal({title:"Getting item details.",text:"Please wait...",type:"info",showLoaderOnConfirm:!0,showConfirmButton:!1});var e=$(this).data("item-id");n.updateID(e),o.getJ("items/getOne/"+e).done(function(e){e&&($("#item-image").fileinput({browseClass:"btn btn-primary",showCaption:!1,showRemove:!1,showUpload:!1,initialPreview:["<img src='"+e.image_file_name+"' class='file-preview-image' alt='Item Image' title='Item Image' width='213' height='160'>"]}),n.category_id(e.category_id),n.image_file_name(e.image_file_name),n.category_id(e.category_id),n.code(e.code),n.name(e.name),n.quantity(e.quantity),n.unit(e.unit),n.cost(e.cost),n.price(e.price),n.description(e.description))}).fail(function(){swal("Whoops! Something went wrong.","","error")})}),$("#itemsDT").on("click",".item-delete",function(){var e=$(this).data("item-id");swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",closeOnConfirm:!1,closeOnCancel:!0},function(t){t&&o.post("items/delete/"+e).done(function(t){t&&($("#itemTR_"+e).addClass("animated zoomOutDown").hide("slow"),swal("Item deleted!","","success"))}).fail(function(){swal("Whoops! Something went wrong.","","error")})})}),n.handleUpdate=function(){var e=i.toJS(n);delete e.edit,delete e.handleSubmit,delete e.handleUpdate,delete e.updateID,o.post("items/update/"+n.updateID(),e).done(function(e){e&&($("#editItemModal").modal("hide"),swal("Item Updated!","","success"))}).fail(function(){swal("Whoops! Something went wrong.","","error")})},e.INVENTO.VM.itemVM=n}(window,jQuery,ko);